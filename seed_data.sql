USE ResearchLabManager;
SET FOREIGN_KEY_CHECKS=0;

-- 1. CLEAN SLATE (Wipe everything to ensure no duplicates)
TRUNCATE TABLE PUBLISHES;
TRUNCATE TABLE PUBLICATION;
TRUNCATE TABLE USES;
TRUNCATE TABLE EQUIPMENT;
TRUNCATE TABLE WORKS;
TRUNCATE TABLE FUNDS;
TRUNCATE TABLE PROJECT;
TRUNCATE TABLE `GRANT`;
TRUNCATE TABLE COLLABORATOR;
TRUNCATE TABLE STUDENT;
TRUNCATE TABLE FACULTY;
TRUNCATE TABLE LAB_MEMBER;

-- 2. INSERT MEMBERS
INSERT INTO LAB_MEMBER VALUES (1, 'Dr. Alice Smith', '2019-01-01', 'Faculty', NULL);
INSERT INTO LAB_MEMBER VALUES (2, 'Dr. Bob Jones', '2020-05-15', 'Faculty', NULL);
INSERT INTO LAB_MEMBER VALUES (3, 'Charlie Lee', '2021-08-20', 'Student', 1);
INSERT INTO LAB_MEMBER VALUES (4, 'Diana Ross', '2022-01-10', 'Student', 1);
INSERT INTO LAB_MEMBER VALUES (5, 'Evan Wright', '2022-09-01', 'Student', 2);
INSERT INTO LAB_MEMBER VALUES (6, 'Frank Miller', '2023-01-15', 'Collaborator', NULL);
INSERT INTO LAB_MEMBER VALUES (7, 'Grace Hopp', '2023-02-01', 'Student', 2);

-- 3. INSERT SUBTYPES
INSERT INTO FACULTY VALUES (1, 'Computer Science'), (2, 'Data Science');
INSERT INTO STUDENT VALUES (3, 'S100', 'PhD', 'CS'), (4, 'S101', 'Masters', 'CS'), (5, 'S102', 'PhD', 'DataSci'), (7, 'S103', 'Masters', 'DataSci');
INSERT INTO COLLABORATOR VALUES (6, 'TechCorp', 'AI Specialist');

-- 4. INSERT GRANTS
INSERT INTO `GRANT` VALUES (101, 'NSF', 500000, '2021-01-01', 36);
INSERT INTO `GRANT` VALUES (102, 'NIH', 300000, '2022-06-01', 24);

-- 5. INSERT PROJECTS (One Active, One Completed for "Status" demo)
INSERT INTO PROJECT VALUES (501, 'AI Health', '2021-02-01', NULL, 36, 1);
INSERT INTO PROJECT VALUES (502, 'Big Data Ops', '2022-07-01', '2023-07-01', 24, 2);

-- 6. FUNDS
INSERT INTO FUNDS VALUES (101, 501);
INSERT INTO FUNDS VALUES (102, 502);

-- 7. WORKS
INSERT INTO WORKS VALUES (501, 3, 'Researcher', 20);
INSERT INTO WORKS VALUES (501, 4, 'Analyst', 15);
INSERT INTO WORKS VALUES (501, 1, 'PI', 10);
INSERT INTO WORKS VALUES (502, 5, 'Dev', 25);

-- 8. EQUIPMENT
INSERT INTO EQUIPMENT VALUES (10, 'Server', 'GPU Cluster', 'Available', '2020-10-10');
INSERT INTO EQUIPMENT VALUES (11, 'Microscope', 'Electron Scope', 'In Use', '2021-03-15');
INSERT INTO EQUIPMENT VALUES (12, 'Laptop', 'MacBook Pro Lab', 'Available', '2022-01-20');

-- 9. USES (Crucial: Diana is ALREADY using the Microscope)
INSERT INTO USES VALUES (4, 11, '2023-11-01', NULL, 'Lab Work');

-- 10. PUBLICATIONS (3 Pubs for "Top 3" report)
INSERT INTO PUBLICATION VALUES (901, 'Deep Learning', 'Nature', '2023-01-15', '10.1038/x');
INSERT INTO PUBLICATION VALUES (902, 'Data Mining', 'IEEE', '2022-11-20', '10.1109/y');
INSERT INTO PUBLICATION VALUES (903, 'Quantum Basics', 'ACM', '2021-05-10', '10.1145/z');

-- 11. PUBLISHES (Authorship)
INSERT INTO PUBLISHES VALUES (1, 901, '2022-01-01', '2023-01-15', 'Author');
INSERT INTO PUBLISHES VALUES (3, 901, '2022-01-01', '2023-01-15', 'Co-Author');
INSERT INTO PUBLISHES VALUES (2, 902, '2022-06-01', '2022-11-20', 'Author');
INSERT INTO PUBLISHES VALUES (5, 902, '2022-06-01', '2022-11-20', 'Co-Author');
INSERT INTO PUBLISHES VALUES (1, 903, '2021-01-01', '2021-05-10', 'Author');

SET FOREIGN_KEY_CHECKS=1;